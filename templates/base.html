<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Makes the website responsive on mobile devices -->
    <!-- width=device-width: sets width to device width -->
    <!-- initial-scale=1: sets initial zoom level to 1 -->
    <!-- shrink-to-fit=no: prevents Safari from shrinking content -->

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/virtualregister.css') }}">
    <!-- Links your custom CSS file from Flask's static folder -->
    <!-- url_for() is a Flask function that generates URL for static files -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" 
    integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" 
    crossorigin="anonymous">
    <!-- Links Bootstrap 4.5.3 CSS from CDN (Content Delivery Network) -->
    <!-- integrity: ensures file hasn't been tampered with -->
    <!-- crossorigin: handles CORS (Cross-Origin Resource Sharing) -->

    {% block css %}{% endblock %}
    <!-- This is a Jinja2 block for child templates to add their own CSS -->
    <!-- Child templates can add additional CSS files here -->

    <title>{% block title %}HMS{% endblock %}</title>
    <!-- Page title with default value "HMS" -->
    <!-- Child templates can override this block to set their own titles -->
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="/">H.M.S</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <!-- data-toggle="collapse": enables collapse functionality -->
        <!-- data-target="#navbarSupportedContent": specifies what to collapse -->

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
                </li>
                <!-- Home link, always visible -->
                <!-- active: highlights current page -->
                <!-- sr-only: screen reader only text for accessibility -->


                <!-- Conditional Navigation Based on User Type -->
                {% if current_user.usertype=="Doctor" %}
                    <li class="nav-item"><a class="nav-link" href="/doctors">Doctors</a></li>
                    <li class="nav-item"><a class="nav-link" href="/bookings">Booking Details</a></li>
                    <li class="nav-item"><a class="nav-link" href="/details">Patients Details</a></li>
                {% else %}
                    <li class="nav-item"><a class="nav-link" href="/patients">Patients Booking</a></li>
                    <li class="nav-item"><a class="nav-link" href="/bookings">Booking Details</a></li>
                {% endif %}

                <!-- User Authentication Section -->
                {% if current_user.is_authenticated %}
                <!-- Shows when user is logged in -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" 
                           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Welcome {{ current_user.username }}
                            <!-- Displays personalized welcome message with username -->
                            <!-- current_user is provided by Flask-Login -->
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="/logout">Logout</a>
                        </div>
                    </li>
                {% else %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" 
                           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Authentication
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="/signup">Signup</a>
                            <a class="dropdown-item" href="/login">Login</a>
                        </div>
                    </li>
                {% endif %}
            </ul>

            <form class="form-inline my-2 my-lg-0" action="/search" method="post">
                <input class="form-control mr-sm-2" type="search" placeholder="Department" name="search" aria-label="Search">
                <button class="btn btn-outline-light my-2 my-sm-0" type="submit">Search</button>
            </form>
        </div>
    </nav>

    <!-- Main Content Block -->
    {% block body %}{% endblock %}
    <!-- This is where child templates will insert their specific content -->
    <!-- All other pages (index.html, login.html, etc.) will extend base.html -->
    <!-- and put their unique content inside this block -->

    <div class="card text-white bg-dark mt-4">
        <div class="card-header">Done By:</div>
        <div class="card-body">
            <h5 class="card-title">Adya Balasubramanyam</h5>
            <h5 class="card-title">23BCE2304</h5>
            <p class="card-text"></p>
        </div>
    </div>

    <!-- Optional JavaScript -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" 
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" 
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" 
            crossorigin="anonymous"></script>
</body>

</html>
